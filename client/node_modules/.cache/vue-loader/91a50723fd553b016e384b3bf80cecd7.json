{"remainingRequest":"/Users/remynguyen/Documents/MIAGE/M1/Javascript/TP3/tp3/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/remynguyen/Documents/MIAGE/M1/Javascript/TP3/tp3/src/components/Accueil.vue?vue&type=style&index=0&id=3d2f8098&scoped=true&lang=css&","dependencies":[{"path":"/Users/remynguyen/Documents/MIAGE/M1/Javascript/TP3/tp3/src/components/Accueil.vue","mtime":1636054458318},{"path":"/Users/remynguyen/Documents/MIAGE/M1/Javascript/TP3/tp3/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/remynguyen/Documents/MIAGE/M1/Javascript/TP3/tp3/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/remynguyen/Documents/MIAGE/M1/Javascript/TP3/tp3/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/remynguyen/Documents/MIAGE/M1/Javascript/TP3/tp3/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/remynguyen/Documents/MIAGE/M1/Javascript/TP3/tp3/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKaDMgewogIG1hcmdpbjogNDBweCAwIDA7Cn0KdWwgewogIGxpc3Qtc3R5bGUtdHlwZTogbm9uZTsKICBwYWRkaW5nOiAwOwp9CmxpIHsKICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgbWFyZ2luOiAwIDEwcHg7Cn0KYSB7CiAgY29sb3I6ICM0MmI5ODM7Cn0KCgoubWQtZmllbGQgewogICAgd2lkdGg6IDYwJTsKICAgIG1hcmdpbjogYXV0bzsKfQoKLnJlY2hlcmNoZSB7CiAgICBwYWRkaW5nLXRvcDogOCU7CiAgICBwYWRkaW5nLWJvdHRvbTogOCU7CiAgICBtYXJnaW46IDIlOwogICAgbWFyZ2luLWxlZnQ6IDE1JTsKICAgIG1hcmdpbi1yaWdodDogMTUlOwogICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7CiAgICBib3JkZXItcmFkaXVzOiAxMHB4Owp9CgoudG9wMyB7CiAgbWFyZ2luLWJvdHRvbTogNCU7Cn0KCi50b3AzIC5tZC1jYXJkIHsKICAgIHdpZHRoOiAyNSU7CiAgICBtYXJnaW46IDRweDsKICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICAgIHZlcnRpY2FsLWFsaWduOiB0b3A7CiAgICBib3JkZXItcmFkaXVzOiAyMHB4Owp9CgoK"},{"version":3,"sources":["Accueil.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Accueil.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"Accueil\">\n\n      <div class=\"recherche\">\n        <h2 style=\"margin-bottom: 5%; margin-left: 20%; text-align: left;\">Que voulez-vous manger ?</h2>\n        <md-field>\n          <label>Restaurants</label>\n            <md-input @input=\"chercherRestaurants\" type=\"texte\" v-model=\"nomRechercher\"></md-input>\n          </md-field>\n\n        <md-table v-model=\"restaurantsRecherche\" v-show=\"show\">\n          <md-table-row slot=\"md-table-row\" slot-scope=\"{ item }\" v-on:click=\"$router.push('/RestaurantDetails/' + item._id)\">\n            <md-table-cell>{{ item.name }}</md-table-cell>\n            <md-table-cell>{{ item.cuisine }}</md-table-cell>\n            <md-table-cell><img src=\"../assets/heart-icon.png\" alt=\"LIKED\" width=\"10px\" v-if=\"isFavoris(item._id)\"></md-table-cell>\n          </md-table-row>\n        </md-table>\n\n        <p v-show=\"noResult\">Aucun résultat</p>\n      </div>\n\n      \n      <div class=\"top3\">\n        <h2>Les mieux notés!</h2>  \n        <md-card v-for=\"item in restaurantsTop3\" :key=\"item\" >\n          <router-link :to=\"'/restaurant/' + item._id\">\n            <md-card-media-cover md-text-scrim>\n                <md-card-media md-ratio=\"16:9\">\n                  <img v-bind:src=\"'https://loremflickr.com/1024/576/food,street,restaurant,cafe&id=' + item._id\" alt=\"Restaurant\">\n                </md-card-media>\n        \n                <md-card-area>\n                  <md-card-header>\n                    <span class=\"md-title\">{{item.name}}</span>\n                    <span class=\"md-subhead\">{{item.cuisine}}</span>\n                    <span class=\"md-subhead\">{{item.note}} Étoiles</span>\n                  </md-card-header>\n                </md-card-area>\n              </md-card-media-cover>\n          </router-link>\n            \n          </md-card>\n\n      </div>\n\n    <div class=\"md-layout md-gutter\">\n    <div class=\"md-layout-item md-size-20\"></div>\n    <div class=\"md-layout-item\">\n      <md-table v-model=\"restaurantsAleatoire\" md-card>\n            <md-table-toolbar>\n              <h1 class=\"md-title\">Restaurants aux hasards</h1>\n            </md-table-toolbar>\n          \n            <md-table-row slot=\"md-table-row\" slot-scope=\"{ item }\" @click=\"$router.push('/RestaurantDetails/' + item._id)\">\n              <md-table-cell md-label=\"Nom\">{{ item.name }}</md-table-cell>\n              <md-table-cell md-label=\"Cuisine\">{{ item.cuisine }}</md-table-cell>\n              <md-table-cell md-label=\"Note\" md-sort-by=\"note\"><i class=\"el-icon-star-on\" v-for=\"note in item.grades[0].score\" :key=\"note\"></i></md-table-cell>\n              <md-table-cell><img src=\"../assets/heart-icon.png\" alt=\"LIKED\" width=\"10px\" v-if=\"isFavoris(item._id)\"></md-table-cell>\n            </md-table-row>\n        </md-table>\n    </div>\n    <div class=\"md-layout-item md-size-20\"></div>\n  </div>\n\n  </div>\n</template>\n\n<script>\nimport _ from \"lodash\"\nexport default {\n  name: 'Accueil',\n  data: function () {\n        return{\n          restaurants: [],\n          restaurantsAleatoire: [],\n          restaurantsRecherche: [],\n          restaurantsTop3: [],\n          favoris : [],\n          nomRechercher: '',\n          show: false,\n          noResult : false\n        }\n    },\n  props: {\n   \n  },\n  computed : {\n      \n  },\n  mounted() {\n    this.getRestaurantsFromServer();\n    if(localStorage.favoris) {\n      this.favoris = JSON.parse(localStorage.getItem(\"cats\"));\n    }\n  },\n  methods : {\n    getRestaurantsFromServer() {\n      let url = 'http://localhost:8080/api/restaurants?';\n      url += '&pagesize=1000';\n      url += '&name=' + this.nomRechercher;\n\n      fetch(url, {\n          method: 'get'\n      }).then((response) => {\n          response.json().then((res) => {\n              this.restaurants = res.data;\n              this.randomize();\n              this.restaurantsAlea();\n              this.topRestaurant();\n    \n          });\n      }).catch(function(err) {\n          console.log(err);\n      });\n      \n            \n    },\n    getSearchedRestaurants() {\n      this.show = false;\n      this.noResult=false;\n      \n      if(this.nomRechercher == ''){\n        this.restaurantsRecherche = [];\n      }\n      else{\n        this.show = true;\n        let url = 'http://localhost:8080/api/restaurants?';\n        url += 'pagesize=' + 3;\n        url += '&name=' + this.nomRechercher;\n\n        fetch(url, {\n            method: 'get'\n        }).then((response) => {\n            response.json().then((res) => {\n                this.restaurantsRecherche = res.data;\n                if(res.data.length == 0){\n                  this.show = false;\n                  this.noResult = true;\n                }\n                \n            });\n        }).catch(function(err) {\n            console.log(err);\n        });\n      }\n    },\n    randomize() {\n        for (let i = this.restaurants.length - 1; i > 0; i--) {\n          let randomIndex = Math.floor(Math.random() * i)\n          let temp = this.restaurants[i]\n          this.$set(this.restaurants, i, this.restaurants[randomIndex])\n          this.$set(this.restaurants, randomIndex, temp)\n          \n        }\n        \n    },\n    restaurantsAlea() {\n      for(let i = 0; i<10 ; i++) {\n        this.restaurantsAleatoire.push(this.restaurants[i]);\n      }\n    },\n    topRestaurant(){\n      let i = 0;\n      let top = 0;\n      while(top<3 && this.restaurants[i] != undefined){\n        if(this.restaurants[i].note == 5 || this.restaurants[i].note == 4){\n          this.restaurantsTop3.push(this.restaurants[i]);\n          top++;\n        }\n        i++;\n      }\n    },\n    isFavoris(id) {\n        if(localStorage.getItem(\"favoris\")){\n            let favoris = JSON.parse(localStorage.getItem(\"favoris\"));\n            return favoris.indexOf(id) >= 0;\n        }\n        return false;\n    },\n    chercherRestaurants:  _.debounce(function(){this.getSearchedRestaurants();},300)\n  }\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\nh3 {\n  margin: 40px 0 0;\n}\nul {\n  list-style-type: none;\n  padding: 0;\n}\nli {\n  display: inline-block;\n  margin: 0 10px;\n}\na {\n  color: #42b983;\n}\n\n\n.md-field {\n    width: 60%;\n    margin: auto;\n}\n\n.recherche {\n    padding-top: 8%;\n    padding-bottom: 8%;\n    margin: 2%;\n    margin-left: 15%;\n    margin-right: 15%;\n    background-color: white;\n    border-radius: 10px;\n}\n\n.top3 {\n  margin-bottom: 4%;\n}\n\n.top3 .md-card {\n    width: 25%;\n    margin: 4px;\n    display: inline-block;\n    vertical-align: top;\n    border-radius: 20px;\n}\n\n\n</style>\n"]}]}